# smb_automation
Данный скрипт предназначен для открытых smb протоколов, а так же vers диалектов, добавлен график для выявления тенденции работающих vers smb в виде bars, сопоставление этой информации поможет понять, какие vers работают в блоках hosts и на какие делать ориентир в первую очередь. На данный момент это один из первых проектов масс-сканирования, он является очень сырым, некоторые except логируются и большинство действий логируется для выявления ошибок. К сожалению, при наблюдениях было выявлено, что даже такой простой скрипт может причинить вред, обьяснять каким образом получить чистый блок адресов с открытым портом самбы я не буду.
Постараюсь обьяснить что для запуска вам понадобится:
- Работащий список,в любом виде, для примера оставил в коде.

![изображение](https://user-images.githubusercontent.com/112577182/204134300-5fb1cb97-b4ff-44b8-8364-4f664d091d4e.png)

Этапы работы: 
1. Диалекты и график версий( 1 поток ). 
2. Дампы всех открытых папок на втором уровне вложенности( максимально возможное пространство потоков (1500) default ). 
3. Дампы всех открытых папок первого уровня( максимально возможное пространство потоков (1500) default ).

- Tested Python 3.10
- Так же перед началом установите некоторые импорты ( pysmb, smbprotocol, threading, uuid ) это самые важные, остальные посмотрите в коде, в части import

![изображение](https://user-images.githubusercontent.com/112577182/204134738-f93fea6f-5e18-4ec1-ac9b-27813fa666ce.png)

- Запустить можем любым удобным способом, для примера ( sh ) python3 main.py  для Linux
- После запуска нажмите любу клавишу чтобы начать сканирование (3-step каждый этап Click enter)

![изображение](https://user-images.githubusercontent.com/112577182/204135005-0f9faaa7-11e1-43cf-99e4-b8f5af2601b8.png)

Как видите при успешном connect, нам возвращается версия диалекта (числовой формат) Если видимый протокол, возвращает Not supported, начинается перебор всех версий.
После первого этапа вам предложат создать фигуру. Click enter.

![изображение](https://user-images.githubusercontent.com/112577182/204135234-637c5d00-0002-4987-a21f-54847f5de6a1.png)

Тут видны все версии диалектов, количество активных хостов с версией самбы. В зависимости от блоков адресов, диалекты заметно меняются. Это может быть вaжным при создание mass scan

- Закрываем фигуру, Click enter.

Второй этап

![изображение](https://user-images.githubusercontent.com/112577182/204135409-3f84b4ad-d7fa-4d8a-a4d8-3c3e84f8e6ea.png)

Важно!!! При работе может возникнуть errors, в основном при работе 2-3 этапа,это связано с взаимодействием протоколов и модуля, иногда они not supported, на данный момент это 5% ошибок при выводе результата, но надеюсь я их решу.

Третий этап

![изображение](https://user-images.githubusercontent.com/112577182/204143970-e8bd4e5a-94d1-4bcb-b838-5974ff8ab5ca.png)

Важно!!! Дождитесь окончания работы программы, она завершится сама, при больших нагрузках (большого количества адресов)
Возможны долгие таймауты

All scanned files saves output dir.
